<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign Up</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="circle half-right" id="circle"></div>

<div class="auth-box" style="left:8%;">
  <h2>SIGN UP</h2>
  <input type="text" id="name" placeholder="Name">
  <input type="password" id="pass" placeholder="Create Password">
  <input type="password" id="confirm" placeholder="Confirm Password">
   <button onclick="register()">Register</button>
</div>

<div class="overlay" id="overlay"></div>

<script>
let c = document.getElementById("circle");
let start = 0;
let drag = false;

c.addEventListener("mousedown", (e)=>{
  start = e.clientX;
  drag = true;
  c.style.transition="transform 0.2s ease, opacity 0.3s ease";
});

document.addEventListener("mousemove", (e)=>{
  if(!drag) return;
  let d = e.clientX - start;
  c.style.transform=`translate(${d}px, -50%) scale(${1 + Math.abs(d)/700})`;
  c.style.opacity = 1 - Math.abs(d)/420;
});

document.addEventListener("mouseup", ()=>{
  if(!drag) return;
  drag = false;
  c.classList.add("expand");
  let o = document.getElementById("overlay");
  if(o) o.classList.remove("active");
  setTimeout(()=> window.location.href="index.html", 350);
});

function register(){
  let name = document.getElementById("name").value;
  let pass = document.getElementById("pass").value;
  let confirm = document.getElementById("confirm").value;

  if(pass!==confirm){
    alert("Password not match");
    return;
  }

  let users = getUsers();
  users.push({
    name:name,
    password:pass,
    role:"user",
    status:"approved"
  });

  saveUsers(users);
  localStorage.setItem("currentUser",name);
  window.location.href="role.html";
}
</script>

<script src="database.js"></script>


</body>
</html>
