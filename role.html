<!DOCTYPE html>
<html>
<head>
<title>Select Role</title>
<link rel="stylesheet" href="style.css">
</head>
<body style="flex-direction:column; gap:20px;">

<h2>Do you want to be an:</h2>

<button onclick="setRole('user')">USER</button>
<button onclick="setRole('organization')">ORGANIZATION</button>
<button onclick="setRole('admin')">ADMIN</button>

<script src="database.js"></script>
<script>
function setRole(role){
  let current = localStorage.getItem("currentUser");
  let users = getUsers();

  for(let i = 0; i < users.length; i++){
    if(users[i].name === current){
      users[i].role = role;

      if(role === "admin"){
        users[i].status = "pending";
        alert("Admin request sent. Please wait for approval.");
        saveUsers(users);
        window.location.href="index.html";
      }
      else if(role === "organization"){
        saveUsers(users);
        window.location.href="org-details.html"; // goes to org registration details
      }
      else{
        saveUsers(users);
        window.location.href="signup-details.html"; // normal user details
      }
      return;
    }
  }
}

</script>

</body>
</html>
