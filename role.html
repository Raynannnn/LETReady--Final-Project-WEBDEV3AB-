<!DOCTYPE html>
<html>
<head>
<title>Select Role</title>
<link rel="stylesheet" href="style.css">
</head>
<body style="flex-direction:column; gap:20px;">

<h2>Do you want to be an:</h2>

<button onclick="setRole('user')">USER</button>
<button onclick="setRole('organization')">ORGANIZATION</button>
<button onclick="setRole('admin')">ADMIN</button>

<script src="database.js"></script>
<script>
function setRole(role){
  let current = localStorage.getItem("currentUser");
  let users = getUsers();

  for(let i = 0; i < users.length; i++){
    if(users[i].name === current){
      users[i].role = role; // ito yung kulang mo, now nauupdate na

      if(role === "admin"){
        users[i].status = "pending";
        alert("Admin request sent. Please wait for approval.");
        saveUsers(users);
        window.location.href="index.html"; // admin stays here
      } 
      else {
        saveUsers(users);
        window.location.href="signup-details.html"; // user/org goes to details
      }
      return; // stop function para di ma-override
    }
  }
}
</script>

</body>
</html>
